---
profiles:
  - PRPL_OSP_TB341
target: intel_x86
subtarget: lgm
external_target: True
description: Build images for the Maxlinear x86 devices - OSP
             This target requires sources from MaxLinear, that are accessible via
             git.maxlinear.com.
             For reference boards, source code access and reporting issues,
             please check https://gitlab.com/prpl-foundation/prplos/prplos/-/wikis/MaxLinear-Open-Service-Platform
feeds:
  - name: intel_x86
    uri: ssh://git@git.maxlinear.com/ugw/feeds/feed_target_x86.git
    tracking_branch: updk_9.1.30
    revision: c266217746df620d652631cc256529998617caba
  - name: rootfs
    uri: ssh://git@git.maxlinear.com/ugw/rootfs.git
    tracking_branch: updk_9.1.30
    revision: a0173dc552973b3f84902efecfb5f1a4796818e2
  - name: 3rdparty
    uri: ssh://git@git.maxlinear.com/ugw/feeds/feed_3rdparty.git
    tracking_branch: updk_9.1.30
    revision: 46a05a23aac3f90bc9c66a4bd8294de498e946da
  - name: datapath
    uri: ssh://git@git.maxlinear.com/ugw/feeds/feed_datapath.git
    tracking_branch: updk_9.1.30
    revision: e867d3d95fdbd2c52e5a51a1160bc7042c07fed8
  - name: gphy_firmware
    uri: ssh://git@git.maxlinear.com/ugw/feeds/feed_gphy_firmware.git
    tracking_branch: updk_9.1.30
    revision: f7ed02509c18851120b559155e9f2316afb46f29
  - name: gwdpa_dpm
    uri: ssh://git@git.maxlinear.com/ugw/feeds/feed_gwdpa-dpm.git
    tracking_branch: updk_9.1.30
    revision: 28b8d2f1c840acdab55ba71a9c4f7d06dc7c9abb
  - name: misc
    uri: ssh://git@git.maxlinear.com/ugw/feeds/feed_common.git
    tracking_branch: updk_9.1.30
    revision: 7bf766c519c882ce31a9b179ccab25b79d0e48a5
  - name: opensource_apps
    uri: ssh://git@git.maxlinear.com/ugw/feeds/feed_opensource_apps.git
    tracking_branch:  updk_9.1.30
    revision: a1fbc0ca349029cc5e21fe75424bcff870067ceb
  - name: packet_learn
    uri: ssh://git@git.maxlinear.com/ugw/feeds/feed_packet_learn.git
    tracking_branch: updk_9.1.30
    revision: 1f326221d8909add27139f7c5edcf72ca11da850
  - name: pon
    uri: ssh://git@git.maxlinear.com/ugw/feeds/feed_pon.git
    tracking_branch: updk_9.1.30
    revision: 14728fd34c859216d42280fd26f77295db5e180d
  - name: ppa
    uri: ssh://git@git.maxlinear.com/ugw/feeds/feed_ppa.git
    tracking_branch: updk_9.1.30
    revision: 47e3aac213072703ee818ae42d5f048420f131d7
  - name: pp_net_adapter
    uri: ssh://git@git.maxlinear.com/ugw/feeds/feed_pp_net_adapter.git
    tracking_branch: updk_9.1.30
    revision: ebc1e4fa2e5b2dbc6e347d1a5c853c5df8e6502d
  - name: vpn_fw
    uri: ssh://git@git.maxlinear.com/ugw/feeds/feed_vpn_fw.git
    tracking_branch: updk_9.1.30
    revision: befe57974f1b70223f8027cd8aebe78735c7191d
  - name: qos
    uri: ssh://git@git.maxlinear.com/ugw/feeds/feed_qos_tc.git
    tracking_branch: updk_9.1.30
    revision: 8904e7fbb73db1d880d7f14139cb971296275c9b
  - name: utils
    uri: ssh://git@git.maxlinear.com/ugw/feeds/feed_ugw_utils.git
    tracking_branch: updk_9.1.30
    revision: cf45032a3f079090dbd40778c77cebff676d0c18
  - name: bootloader
    uri: ssh://git@git.maxlinear.com/ugw/feeds/feed_uboot.git
    tracking_branch:  updk_9.1.30
    revision: 4b003e393f7bb73ace65d0b434c432d2a0cb1bef
  - name: dpl
    uri: ssh://git@git.maxlinear.com/ugw/feeds/feed_dpl.git
    tracking_branch:  updk_9.1.30
    revision: 4059c44ca150034295619969a5feaf6f707176d6

additional_packages:
  - feed: packages
    packages:
      - miniupnpd2-prpl

packages:
  - kmod-mxl_eth_drv
  - kmod-gwdpa-dpm
  - kmod-pp_net_adapter
  - kmod-packet_learn
  - ppv4-firmware-lgm
  - kmod-intel_ppv4_fw_lgm
  - kmod-ppv4
  - kmod-p34x_phy_fwdl
  - ltq-gphy-fw-lgm
  #- netifd-ugw
  - e2fsprogs
  - kmod-directconnect-dp
  - kmod-ppa-drv
  - kmod-ppa-drv-accel
  - kmod-ppa-drv-gre
  - kmod-ppa-drv-lgm
  - kmod-ppa-drv-stack-al
  - ppacmd
  - kmod-mxl_vpn
  - kmod-mxl_lgm_toe
  - kmod-ipsec4
  - kmod-ipsec6
  - kmod-ipsec
  - eip197-firmware
  - kmod-safexcel
  - vpn-firmware-lgm
  - kmod-ipsec4-offload
  - kmod-ipsec6-offload
  - pon-libnl
  - gpon-omci-onu
  - pon-mcc-lib
  - pon-lib
  - pon-net-lib
  - pon-img-lib
  - pon-tools
  - base-files-platform-lgm
  - pon-base-files
  - pon-base-files-debug
  - pon-base-files-prpl
  - pon-lib-cli
  - pon-lib-daemon
  - ponmbox-cli
  - pon-gpon-firmware-urx-b
  - pon-xpon-firmware-urx-b
  - pon-serdes-firmware-urx-b
  - kmod-pon-mbox-drv-eth
  - kmod-dp-eth-reinsert
  - kmod-pon-mcc-drv
  - kmod-pon-mcc-drv-filter
  - kmod-mxl_pon_hgu_vuni_lgm
  - ethtool
  - base-files-prpl
  - ppmd
  - pm-util
  - kmod-intel-qos
  - kmod-qos-tc
  - partx-utils
  - obudpst
  - speedtest-modules
  - kmod-dpl

diffconfig: |
  CONFIG_DEVEL=y
  CONFIG_KERNEL_GIT_CLONE_URI="git@git.maxlinear.com:mxl/linux.git"
  CONFIG_KERNEL_GIT_DEPTH=""
  CONFIG_KERNEL_GIT_REF="updk_9.1.30"
  CONFIG_GPON_OMCI_ONU_UBUS_INTERFACE=y
  CONFIG_TARGET_OPTIONS=y
  CONFIG_TARGET_MULTI_PROFILE=y
  CONFIG_TARGET_PER_DEVICE_ROOTFS=y
  CONFIG_TARGET_DEVICE_intel_x86_lgm_DEVICE_PRPL_OSP_TB341=y
  # CONFIG_TARGET_DEVICE_intel_x86_lgm_DEVICE_LGM_PRPL is not set
  # CONFIG_TARGET_ROOTFS_EXT4FS is not set
  CONFIG_BUILD_LOG=y
  CONFIG_PACKAGE_uboot-osp-tb341-p34x-phy-emmc=y
  CONFIG_VERSION_FILENAMES=n
  CONFIG_VERSION_CODE_FILENAMES=n
  # CONFIG_PACKAGE_bios_images is not set
  CONFIG_BUILD_SDK="prplos"
  CONFIG_BUSYBOX_CUSTOM=y
  CONFIG_BUSYBOX_CONFIG_TFTPD=y
  CONFIG_BUSYBOX_CONFIG_FEATURE_TFTP_GET=y
  CONFIG_BUSYBOX_CONFIG_FEATURE_TFTP_PUT=y
  CONFIG_BUSYBOX_CONFIG_TFTP=y
